### å‘½ä»¤æ¨¡å¼
å‘½ä»¤æ¨¡å¼ä¸­çš„å‘½ä»¤(command)ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªæ‰§è¡ŒæŸäº›
ç‰¹å®šäº‹æƒ…çš„æŒ‡ä»¤ã€‚å³ï¼Œåšäº‹æƒ…çš„å‡½æ•°ï¼ˆä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰åšäº‹æƒ…çš„å‡½æ•°ï¼‰ã€‚

### èœå•ç¨‹åº

    // æ¥æ”¶è€…receiverï¼Œåªè´Ÿè´£è‡ªå·±å¤„ç†äº‹æƒ…ï¼Œè¿™ä¸€ç§èŒè´£
    let meauBar = {
        refresh(){é¡µé¢åˆ·æ–°},
    }
    // å®šä¹‰receiverå¯¹å¤–çš„æ¥å£
    function menuBarCommand(receiver) {
        return {
            execute(){
                receiver.refresh() // é—­åŒ…
            }
        }
    }

    // ä¸­é—´è€…ï¼Œè¿æ¥è¯·æ±‚è€…btnï¼Œå’Œæ¥æ”¶è€…
    function setCommand (btn, command) {
        btn.onclick = function () {
            command.execute()
        }
    }

    // æ‰§è¡Œ
    setCommand(btn1, menuBarCommand(meauBar))

    ä¸ªäººè§‰å¾—ï¼š
    - å‘½ä»¤æ¨¡å¼å°±æ˜¯ï¼Œé¦–å…ˆæŠŠè¦æ‰§è¡Œçš„å‡½æ•°æ”¶é›†åœ¨ä¸€èµ·ï¼ˆå«receiverå…¶å®å°±æ˜¯ä¸€æ”¶é›†å‡½æ•°çš„å¯¹è±¡ï¼‰ï¼Œä¸å’Œå…¶ä»–å‡½æ•°è€¦åˆï¼Œåªè¡¨è¾¾è‡ªå·±æ˜¯åšä»€ä¹ˆçš„è€Œå·²ã€‚
    - ç„¶åå†å¦å†™ä¸€ä¸ªcommandå¯¹è±¡ï¼ŒæŠŠåˆšåˆšå‡½æ•°çš„æ¥å£ä»¬æš´éœ²å‡ºå»ã€‚
    - æœ€åï¼Œè°çˆ±è°ƒç”¨è°å°±æ¥è°ƒç”¨ã€‚

    ä¼˜ç‚¹ï¼šä½ å¯ä»¥å¾€å‡½æ•°é›†(receiver)é‡Œæ·»åŠ æ–°å‡½æ•°ï¼Œç„¶åæš´éœ²æ¥å£æ‹¿å‡ºå»ä½¿ç”¨å³å¯

### å›æ”¾ä½ çš„è¡Œä¸º ğŸ™€

    æ€è·¯ï¼šä¸‹ç­å›å®¶æœ‰å››ç§è¡Œä¸ºï¼Œå¼€é—¨ã€æ´—æ‰‹ã€æ’¸çŒ«ã€æ‰“å¼€ç”µè„‘ã€‚å®Œæˆä¹‹åï¼Œå€’æ”¾è¿™äº›è¡Œä¸ºã€‚

    let actionType = {
      openDoor(){
          console.log('openDoor')
      },
      washHands(){
          console.log('washHands')
      },
      playCats(){
          console.log('playCats')
      },
      openComputer(){
          console.log('openComputer')
      }
    }

    function actionCommand(receiver, state){
        return function () {
          receiver[state]()
        }
    }

    let press = {
        '113': 'openDoor',
        '119': 'washHands',
        '101': 'playCats',
        '114': 'openComputer'
    }

    let commandTask = []
    document.onkeypress = function(e){
        let keyCode = e.keyCode
        let command = actionCommand(actionType, press[keyCode])
        commandTask.push(command)
        command()
    }
    document.getElementById('backAction').onclick = function(){
      while (commandTask.length){
        let command = commandTask.shift()
        command()
      }
    }




