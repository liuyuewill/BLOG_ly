### 状态模式

### 按下开关，调整灯光

- 普通思路：判断当前是哪一种状态，按下btn，切换为下一种状态，用if - else
  
        function Light(){
            this.status = 'off'
            this.btn = null
        }

          
        Light.prototype.enter = function (){
            法一：最普通的if-else
            if (this.status === 'on') {
                this.status = 'off'
            } else if (this.status === 'off') {
                this.status = 'on'
            }

            法二：运用策略模式
            this.status = lightStatus(this.status)
        }

        【法二：运用策略模式
            lightStatus = {
                on(){
                    return 'off'
                },
                off(){
                    return 'on'
                }
            }
         】

        Light.prototype.init = function () {
            let self = this
            if (!this.btn) { // 运用单例模式
                let btn = document.createElement('button')
                btn.innerHTML = '开关'
                this.btn = btn
                document.body.appendChild(btn)
                btn.onclick = function(){
                    self.enter()
                }
            }
        }
        let lig = new Light()
        lig.init()

        如果是按一下 强强光，再按一个强光……弱光、弱弱光，就得往enter函数里不断加if...else
- 状态模式 改进电灯程序
思路：把每种状态封装成单独的类，跟此状态相关的行为，都封装在这个状态类里面。
btn按下去的时候，该状态对象会负责渲染它自身的行为。

        // 状态1
        var OffLightState = function( light ){ 
            this.light = light;
        };
        OffLightState.prototype.buttonWasPressed = function(){ 
            console.log( '弱光' );
            this.light.setState( this.light.weakLightState );
        };


        // 状态2
        // WeakLightState:
        var WeakLightState = function( light ){ 
            this.light = light;
        };
        WeakLightState.prototype.buttonWasPressed = function(){ 
            console.log( '强光' );
            this.light.setState( this.light.strongLightState );
        };





        var Light = function(){
            this.offLightState = new OffLightState( this );
            this.weakLightState = new WeakLightState( this );
            this.strongLightState = new StrongLightState( this ）;
            this.btn = null;
        };
        Light.prototype.init = function(){
            var button = document.createElement( 'button' ),
            self = this;
            this.button = document.body.appendChild( button ); this.button.innerHTML = '开关';

            this.currState = this.offLightState;
            this.button.onclick = function(){
                self.currState.buttonWasPressed();
            }
        };

        Light.prototype.setState = function( newState ){
            this.currState = newState;
        };

        var light = new Light();
        light.init();